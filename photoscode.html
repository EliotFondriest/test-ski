<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Galerie - Ski Club</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; font-family: sans-serif; overflow: hidden; }
        .nav { background: #1a1a1a; color: white; padding: 15px; display: flex; align-items: center; justify-content: space-between; }
        .back-btn { color: white; text-decoration: none; font-weight: bold; }
        iframe { width: 100%; height: calc(100vh - 50px); border: none; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="calendrier.html" class="back-btn">← Retour au calendrier</a>
        <span id="album-title">Chargement...</span>
    </div>
    <div id="viewer"></div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const sortieId = urlParams.get('sortie');
        const albums = JSON.parse(localStorage.getItem('skiGallery')) || [];

        const album = albums.find(a => a.title.includes("Sortie #" + sortieId));

        if(album) {
            document.getElementById('album-title').innerText = album.title;
            document.getElementById('viewer').innerHTML = `<iframe src="${album.link}" allowfullscreen></iframe>`;
        } else {
            document.body.innerHTML = "<h1>Album non trouvé</h1><a href='calendrier.html'>Retour</a>";
        }
    </script>
</body>
</html>